<!DOCTYPE html>

<html >

	<head>

	    <meta charset="UTF-8" />

	    <script rel="prefetch" type="application/x-javascript" src="./vendor.js"></script>
	    <script rel="prefetch" type="application/x-javascript" name="main" src="./spice.js" ></script>

		<script  type="application/x-javascript" defer>

		if (true){
			var _App = ((SpiceJS.create()).OnLoad = function (self) {

				var width = 1400;
				var height =320;

				self.main = {init:function(){

					//this.visuals.Rect(200,200,200,200,"#FFFFFF");
					this.a = new Circle(120,150,10,"#FFFFFF",1,this.visuals);
					this.b = new Circle(120,150,10,"#FFFFFF",1,this.visuals);

				},draw:function(){
					//this.visuals.rect(200,200,200,200,"#FFFFFF");
				},update:function(){

					this.a.x += Math.sin(new Date().getTime()/1000)*5;
					this.b.x -= Math.cos(new Date().getTime()/1000)*5;

				}};

				//start the application with the given resolution

				self.Start(width, height);

				//create a global reference
				window.Application = this;

			});
		} else {
			SpiceJS.create();
		}

		var handleResolutionChange = function(e){
			var res = e.target.value.split("x");
			var client = SpiceJS.controller.list().client;
			client.setWidth = Number(res[0]);
			client.setHeight = Number(res[1]);
			client.update.difference.x = 1;
		}

		var handleMainChange = function(e){

				var i = 0;
				var res = (Array.from(e.target.children).filter(function(x){
					if (x.selected)
					return true;
				})[0]).index;
				console.log(res);
		}

		</script>

	</head>

	<body>

		<h3 style="color:white;position:fixed;top:10px;left:5%; width:100px; z-index:100;">SpiceJS</h3>

		<select style="position:fixed;top:50px;left:5%; width:100px; z-index:100;" onChange="handleMainChange(event)">
			<option value="">Loading</option>
			<option value="" selected>Circles A & B</option>
			<option value="">Mountian Stars</option>
			<option value="">Tile & Circles</option>
			<option value="">Circle</option>
		</select>

		<select style="position:fixed;top:68px;left:5%; width:100px; z-index:100;" onChange="handleResolutionChange(event)">
			<option>200x300</option>
			<option>400x300</option>
			<option>480x320</option>
			<option>1024x720</option>
			<option selected>1400x320</option>
			<option selected>1400x780</option>
			<option>1920x1080</option>
		</select>

	</body>


</html>
