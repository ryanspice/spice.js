<!DOCTYPE html>

<html >

	<head>

	    <meta charset="UTF-8" />

	    <script rel="prefetch" type="application/x-javascript" src="./vendor.js"></script>

	    <script rel="prefetch" type="application/x-javascript" name="main" src="./spice.js" ></script>

		<script  type="application/x-javascript" defer>

		let TIleCount = 0;
		class Tile  {
			constructor(img,visuals,x,y,offx,offy){
				this.img = img;
				this.visuals = visuals;
				this.position = {x:x,y:y};
				this.off = {x:offx,y:offy};
			}
			draw(){

				this.visuals.image_part(this.img,this.position.x,this.position.y,1,1,0,0+this.off.x*16,0+this.off.y*16,16,16);


			}
		}

		class Ground {



		}

			var _App = ((SpiceJS.create()).OnLoad = function (self) {

				var width = 400;
				var height =300;

				self.main = {init:function(){


					/*
					this.visuals.bleed = 0.1175;
					for(var i = 2; i>0; i--)
						this.visuals.Circle(window.innerWidth/3,100,3,"#A9CCE3",1);
						*/
						this.snow = this.graphics.load("../tiles_packed");

						this.tiles = [];
						let s = 16;

						let i = 16;
						let t = i;
						while(i-->=0)
						this.tiles.push(this.visuals.createMapObject('Tile',this.snow,0+t*i,100,1,1,1,0,0,16,16));

/*

						this.tiles.push(new Tile(this.snow,this.visuals,0*s,0*s,1,4));
						this.tiles.push(new Tile(this.snow,this.visuals,1*s,0*s,1,4));
						this.tiles.push(new Tile(this.snow,this.visuals,2*s,0*s,1,4));
						this.tiles.push(new Tile(this.snow,this.visuals,3*s,0*s,1,4));
						this.tiles.push(new Tile(this.snow,this.visuals,4*s,0*s,1,4));



						this.tiles.push(new Tile(this.snow,this.visuals,1*s,1*s,1,4));
						this.tiles.push(new Tile(this.snow,this.visuals,2*s,2*s,1,4));
						*/
					},draw:function(){
						/*
						for(let i = 0; i<=this.tiles.length-1;i++){

							this.tiles[i].draw();

						}*/

						//this.visuals.blid()
						/*

					let r = Math.sin(Date.now()/360);

					//this.visuals.drawArray(this.circles, circle => this.visuals.circle(circle.x,circle.y,circle.r,"red"));
					this.visuals.drawBufferedSpritesNewPosition((sprite)=>{
						let i = sprite._id;
						let obj = {
							x:600+5*window.innerWidth*Math.sin(Date.now()/360-i*r)/250,
							y:200+5*window.innerWidth*Math.cos(Date.now()/360-i*r)/250
						}
						return obj;
					});

					if (this.visuals.touch_within(0,0,10,10,false)) {

						console.log('eh');

					}

					if (this.visuals.touch_within2(0,0,100,100,false)) {

						console.log('eh2');

					}
				*/
				},update:function(){



				}};

				self.Start(width, height);

				window.Application = this;

			});

		</script>

	</head>

	<body>
		<h3 style="color:white;position:fixed;top:10px;left:5%; width:100px; z-index:100;">SpiceJS</h3>
		<select style="position:fixed;top:50px;left:5%; width:100px; z-index:100;">
			<option>Loading</option>
		</select>
		<select style="position:fixed;top:68px;left:5%; width:100px; z-index:100;">
			<option>1920x1080</option>
		</select>

	</body>


</html>
