<!DOCTYPE html>
<html >
<head>
    <meta charset="UTF-8">
    <title>Application</title>    
    <script rel=prefetch type="application/x-javascript" src="../../spice.js"></script>
</head>
<body>
<script rel="prefetch" name="main" type="text/javascript" defer>
	
	var SpiceBETA = {
		
		init:function() {
			
			var x = this.app.getScaledWidth()/2-130;
			var y = this.app.getHeight()/3.5;
			
			this.paths = this.visuals.paths.init(this.visuals);

			
			
			this.beta_path = this.visuals.paths.init(this.visuals);
			
			
			this.subbeta_ = [];
			
			this.subbeta_[0] = this.beta_path.addPath('B',x+120-7,y+14*2.5);	
			this.subbeta_[0].addPoint(0,11);
			this.subbeta_[0].addPoint(0,0);
			this.subbeta_[0].addPoint(10,0);
			this.subbeta_[0].addPoint(10,11);
			this.subbeta_[0].addPoint(0,11);
			this.subbeta_[0].addPoint(0,22);
			this.subbeta_[0].addPoint(10,22);
			this.subbeta_[0].addPoint(10,11);
			
			this.subbeta_[1] = this.beta_path.addPath('E',x+134-7,y+14*2.5);	
			this.subbeta_[1].addPoint(12,0);
			this.subbeta_[1].addPoint(0,0);
			this.subbeta_[1].addPoint(0,11);
			this.subbeta_[1].addPoint(12,11);
			this.subbeta_[1].addPoint(0,11);
			this.subbeta_[1].addPoint(0,22);
			this.subbeta_[1].addPoint(12,22);
			
			this.subbeta_[2] = this.beta_path.addPath('T',x+148-7,y+14*2.5);	
			this.subbeta_[2].addPoint(7,22);
			this.subbeta_[2].addPoint(7,0);
			this.subbeta_[2].addPoint(14,0);
			this.subbeta_[2].addPoint(0,0);
			this.subbeta_[2].addPoint(7,0);
			
			
			this.subbeta_[3] = this.beta_path.addPath('A',x+164-7,y+14*2.5);	
			this.subbeta_[3].addPoint(12,22);
			this.subbeta_[3].addPoint(12,0);
			this.subbeta_[3].addPoint(0,0);
			this.subbeta_[3].addPoint(0,11);
			this.subbeta_[3].addPoint(12,11);
			this.subbeta_[3].addPoint(0,11);
			this.subbeta_[3].addPoint(0,22);
			
			
			
			this.beta_ = [];
			this.beta_['a'] = this.paths.addPath('A',x+134,y+0);	


			this.beta_['a'].addPoint(0,0);
			this.beta_['a'].addPoint(14,0);
			this.beta_['a'].addPoint(7,0);
			this.beta_['a'].addPoint(7,-10);
			this.beta_['a'].addPoint(0,-10);
			this.beta_['a'].addPoint(14,-18);
			
			
			this.beta_['a'].addPoint(7,-10);
			this.beta_['a'].addPoint(7,22);
			this.beta_['a'].addPoint(14,22);
			this.beta_['a'].addPoint(14,28);
			
			
			this.path = this.paths.addPath('S',x+100,y+0);
			this.path.addPoint(0,20);
			this.path.addPoint(0,22);
			this.path.addPoint(15,22);
			this.path.addPoint(0,2);
			this.path.addPoint(0,0);
			this.path.addPoint(15,0);
			this.path.addPoint(15,2);
			
			this.beta_['p'] = this.paths.addPath('P',x+117,y+0);
			this.beta_['p'].addPoint(0,22);
			this.beta_['p'].addPoint(0,0);
			this.beta_['p'].addPoint(15,0);
			this.beta_['p'].addPoint(15,10);
			this.beta_['p'].addPoint(0,10);
			
			this.beta_['i'] = this.paths.addPath('I',x+134,y+0);
			this.beta_['i'].addPoint(0,0);
			this.beta_['i'].addPoint(14,0);
			this.beta_['i'].addPoint(7,0);
			
			this.beta_['i'].addPoint(7,22);
			this.beta_['i'].addPoint(0,22);
			this.beta_['i'].addPoint(14,22);
			
			this.beta_['c'] = this.paths.addPath('C',x+151,y+0);
			this.beta_['c'].addPoint(14,0);
			this.beta_['c'].addPoint(0,0);
			this.beta_['c'].addPoint(0,22);
			this.beta_['c'].addPoint(14,22);
			
			this.beta_['e'] = this.paths.addPath('E',x+168,y+0);
			this.beta_['e'].addPoint(14,0);
			this.beta_['e'].addPoint(0,0);
			this.beta_['e'].addPoint(0,10);
			this.beta_['e'].addPoint(14,10);
			this.beta_['e'].addPoint(0,10);
			this.beta_['e'].addPoint(0,22);
			this.beta_['e'].addPoint(14,22);
			
			
			
			
			this.d = 0;
			this.c = 0;
			this.r = 0;
			this.q = 1;
			
			return this;
		},
		update:function(){
			
			this.r+=0.1;
			
			if (this.d<1)
				this.d+=0.1;
			if (this.c>360){
				
				this.q -=0.1;
				if (this.q<0.1)
				this.fin = true;
			}
			else
			this.c+=2;
			
			this.d = Math.sin(this.c);
			
		},
		draw:function(){
			
			if (this.fin)
				return false;
			
			var vy = 0.4-0.4*Math.cos(this.r);
			var v = 0.4-0.4*Math.sin(this.r);
			
			var d = 0.5;
			var f = 1;
			v = f+(-Math.random()*d+Math.random()*d)/2;
			vy = 1+(-Math.random()*d+Math.random()*d)/2;
			
			var cc = this.app.client.Math.Clamp(-10+this.c/10,0,1);
			var cc2 = this.app.client.Math.Clamp(this.c/100,0,1);
			
			cc2 = (1/1.5-cc/2)*this.q/2;
			cc*=this.q;
			
			
			for(var i = this.path.list.length-1; i>0; --i)
			{
				this.visuals.quadraticCurve(this.path.list[i-1].x,this.path.list[i-1].y,this.path.list[i].x*1,this.path.list[i].y*1,cc,"#FFFFFF");
				this.visuals.quadraticCurve(this.path.list[i].x*vy,this.path.list[i].y*v,this.path.list[i].x,this.path.list[i].y,cc2,"#FFFFFF");
			}
			
			
			for (var ii = this.subbeta_.length-1;ii>=0;--ii)
			{
				path =this.subbeta_[ii];

				for(var i = path.list.length-1; i>0; --i)
				{
					this.visuals.quadraticCurve(path.list[i-1].x,path.list[i-1].y,path.list[i].x*1,path.list[i].y*1,cc,"#FFFFFF");
					this.visuals.quadraticCurve(path.list[i].x*vy,path.list[i].y*v,path.list[i].x,path.list[i].y,cc2,"#FFFFFF");
				}
			}
			
			path =this.beta_['p']; 
			
			for(var i = this.beta_['p'].list.length-1; i>0; --i)
			{
				this.visuals.quadraticCurve(path.list[i-1].x,path.list[i-1].y,path.list[i].x*1,path.list[i].y*1,cc,"#FFFFFF");
				this.visuals.quadraticCurve(path.list[i].x*vy,path.list[i].y*v,path.list[i].x,path.list[i].y,cc2,"#FFFFFF");
			}
			path =this.beta_['i']; 
			for(var i = this.beta_['i'].list.length-1; i>0; --i)
			{
				this.visuals.quadraticCurve(path.list[i-1].x,path.list[i-1].y,path.list[i].x*1,path.list[i].y*1,cc,"#FFFFFF");
				this.visuals.quadraticCurve(path.list[i].x*vy,path.list[i].y*v,path.list[i].x,path.list[i].y,cc2,"#FFFFFF");
			}
			path =this.beta_['c']; 
			for(var i = this.beta_['c'].list.length-1; i>0; --i)
			{
				this.visuals.quadraticCurve(path.list[i-1].x,path.list[i-1].y,path.list[i].x*1,path.list[i].y*1,cc,"#FFFFFF");
				this.visuals.quadraticCurve(path.list[i].x*vy,path.list[i].y*v,path.list[i].x,path.list[i].y,cc2,"#FFFFFF");
			}
			path =this.beta_['e']; 
			for(var i = this.beta_['e'].list.length-1; i>0; --i)
			{
				this.visuals.quadraticCurve(path.list[i-1].x,path.list[i-1].y,path.list[i].x*1,path.list[i].y*1,cc,"#FFFFFF");
				this.visuals.quadraticCurve(path.list[i].x*vy,path.list[i].y*v,path.list[i].x,path.list[i].y,cc2,"#FFFFFF");
			}
			
			
		}
	};
	
	var Loading = {
		init:function(){
		
			return this;
		},
		draw:function(){},
		update:function(){},
		
	}
	
	var Application = SpiceJS.create();

	//console.log(Application);
	//Application OnLoad
	Application.OnLoad = function (self) {

		self.Init("Example SpiceJS", 720, 320);

		self.canvas.setBackground("#000000");

		//self.options.set({paths:{images:""}});

		self.ext.metatag.metaFavicon("favicon.png");

	};

	//Application main loop Object[init,update,draw]
	Application.main= {

		name:"Example",

		init:function() {

			this.title = this.app.create(SpiceBETA).init();
			this.loading = this.app.create(Loading);
			
			this.img = this.graphics.load("../favicon");

			return true;
		},

		update:function() {
			
			this.title.update();
			
			return true;
		},

		draw:function() {

			this.loading.draw(this.title.draw());
			
			return true;
		}

	};
</script>
</body>
</html>